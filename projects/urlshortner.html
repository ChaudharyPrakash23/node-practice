<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>URL Shortener</title>
<style>
body { background:#6fa56f; font-family:sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; }
.container { background:white; padding:25px; width:350px; border-radius:10px; }
input, button { width:100%; padding:8px; margin-top:10px; }
button { background:#6fa56f; color:white; border:none; cursor:pointer; }
.result { background:#e8f5e8; margin-top:10px; padding:8px; border-radius:5px; }
</style>
</head>

<body>
<div class="container">
<h2>URL Shortener</h2>

<form id="form">
<input type="text" name="url" placeholder="Enter URL" required>
<input type="text" name="url_short" placeholder="Custom code (optional)">
<button>Shorten</button>
</form>

<div id="output"></div>
</div>

<script>
document.getElementById("form").addEventListener("submit", async e => {
  e.preventDefault();

  const fd = new FormData(e.target);
  const url = fd.get("url");
  const url_short = fd.get("url_short");

  const res = await fetch("/shorten", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({ url, url_short })
  });

  const data = await res.json();

  const box = document.createElement("div");
  box.className = "result";
  box.innerHTML = `<a href="${data.short}" target="_blank">${data.short}</a>`;

  document.getElementById("output").appendChild(box);
});
</script>
</body>
</html>
